<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>collision</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/entries.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&family=Zen+Dots&display=swap" rel="stylesheet">
</head>
<style>
    /* 当屏幕宽度小于 1024px（进入手机布局）时 */
  @media (max-width: 1024px) {
    .parent {
      grid-template-columns: repeat(10, 1fr);
      grid-template-rows: repeat(46, 1fr);
    }
  
    .div1 {
      grid-area: 1 / 1 / 8 / 6;
  
      /* 让字体大小基于网格宽度变化，保证缩放时仍然协调 */
      font-size: calc(5vw);
    }
  }
</style>
<body>
    <div class="parent">
        <div class="div1">
            <p>COLLISION</p>
        </div>
        <div class="div2">
            <a href="9insight.html" class="badge-link">
                <div class="badge"><p>BACK</p></div>
            </a>
            <span class="outline" id="eurekaBtn">EUREKA</span>
        </div>
        <div class="div5">
            <div id="content">
                <p id="text0"><span class="trigger-word" data-target="text1">And that, I think, is a great case study, a great lesson in the power -- the marvelous, unplanned, emergent, unpredictable power -- of open innovative systems. </span></p>
                <p id="text1" class="hidden-text">
                    When you build them right, they will be led to completely new directions the creators never even dreamed of. I mean, here you have these guys who basically thought they were just following this <span class="trigger-word" data-target="text2">hunch</span>, this little passion that had developed, then they thought they were fighting the Cold War, and then, it turns out, they're just helping somebody find a soy latte.
                </p>
                <p id="hint1" class="hint">A (strong intuition or feeling) about something.</p>
                <p id="text2" class="hidden-text">
                    That is how innovation happens. 
                </p>
        
        
        

            </div>
            <button id="nextPage" onclick="window.location.href='../final.html'">Next</button>
            <div class="word" onclick="showInfo(this, '???','../final.html')" data-index="2">CONNECTION</div><br>
        </div>
    </div>

</body>
 <script>
function showInfo(element, text, url) {
    let existingBox = element.nextElementSibling;

    // 获取当前单词的 data-index 值
    let originalIndex = element.getAttribute('data-index');

    // 如果已经存在 info-box，则删除它并恢复原来的 data-index
    if (existingBox && existingBox.classList.contains('info-box')) {
        existingBox.remove();
        element.setAttribute('data-index', originalIndex); // 恢复原数字
        return;
    }

    // 先恢复所有单词的 data-index，防止多个打开时混乱
    document.querySelectorAll('.word').forEach(word => {
        let index = word.getAttribute('data-index-original') || word.getAttribute('data-index');
        word.setAttribute('data-index', index);
    });

    // 创建新的 info-box
    let infoBox = document.createElement('div');
    infoBox.className = 'info-box show';
    
    // 创建一个链接，点击后跳转
    let link = document.createElement('a');
    link.href = url;  // 跳转链接
    link.target = '_blank'; // 在新标签页打开链接
    link.innerHTML = text;  // 展开显示的文本
    
    // 把链接添加到 info-box
    infoBox.appendChild(link);

    // 插入到 .word 下方
    element.parentNode.insertBefore(infoBox, element.nextSibling);

    // 把 data-index 改成 `>`
    element.setAttribute('data-index-original', originalIndex); // 记录原始值
    element.setAttribute('data-index', '>'); 
    
}
</script>
<script>
document.querySelectorAll(".word").forEach(word => {
    word.addEventListener("click", function() {
        this.classList.toggle("active");
    });
});
</script>
<script>
      let unlockedCount = 0; // 记录解锁的段落数
        const totalTexts = 5; // 需要解锁的段落总数

        document.addEventListener("click", function(event) {
            if (event.target.classList.contains("trigger-word")) {
                let targetId = event.target.getAttribute("data-target");
                let targetElement = document.getElementById(targetId);
                let hintElement = document.getElementById("hint" + targetId.replace("text", ""));
                
                if (targetElement && targetElement.style.display !== "block") {
                    targetElement.style.display = "block"; // 显示段落
                    unlockedCount++; // 增加计数
                }
                if (hintElement) {
                    hintElement.style.display = "block"; // 立即显示提示信息
                }

                // 当所有文本都解锁时，显示 Next Page 按钮
                if (unlockedCount === totalTexts) {
                    document.getElementById("nextPage").style.display = "block";
                }
            }
        });
</script>
<script>
document.querySelectorAll(".trigger-word").forEach(trigger => {
    trigger.addEventListener("click", function() {
        let stimulantWord = document.querySelector(".word"); // 选取 STIMULANT 元素
        if (stimulantWord) {
            let currentIndex = parseInt(stimulantWord.getAttribute("data-index"), 10);
            if (!isNaN(currentIndex) && currentIndex > 0) {
                stimulantWord.setAttribute("data-index", currentIndex - 1);
            }
        }
    });
});

</script>
<script>
    document.getElementById("eurekaBtn").addEventListener("click", function() {
    document.querySelectorAll(".trigger-word").forEach(word => {
        word.classList.toggle("highlight");
    });
});

</script>
</html>